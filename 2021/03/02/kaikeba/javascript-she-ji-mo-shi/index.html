<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="前端设计模式, IT 学习 资源站 C# CAD .net core EF Javascript Flutter TypeScript 数据结构 算法 网络 测试 产品">
    <meta name="description" content="IT 学习 资源站 C# CAD .net core EF Javascript Flutter TypeScript 数据结构 算法 网络 测试 产品">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>前端设计模式 | IT 学习 资源</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="IT 学习 资源" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">IT 学习 资源</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">IT 学习 资源</div>
        <div class="logo-desc">
            
            IT 学习 资源站 C# CAD .net core EF Javascript Flutter TypeScript 数据结构 算法 网络 测试 产品
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/jiayueshe/jiayueshe.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/jiayueshe/jiayueshe.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/3.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">前端设计模式</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="container content">

    
    <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">
                                <span class="chip bg-color">设计模式</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="post-category">
                                设计模式
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-03-02
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2021-03-02
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    6.6k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    28 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="前端设计模式"><a href="#前端设计模式" class="headerlink" title="前端设计模式"></a>前端设计模式</h1><p>​        设计模式（Design Pattern）是⼀套被反复使⽤、多数⼈知晓的、经过分类的、代码设计经验的总结。</p>
<h2 id="订阅-发布模式-（观察者）"><a href="#订阅-发布模式-（观察者）" class="headerlink" title="订阅**/**发布模式 （观察者）"></a>订阅**/**发布模式 （观察者）</h2><p>pub/sub 这个应该⼤家⽤到最⼴的设计模式了，</p>
<p>​    在这种模式中，并不是⼀个对象调⽤另⼀个对象的⽅法，⽽是⼀个对象订阅另⼀个对象的 特定活动并在</p>
<p>​    状态改编后获得通知。订阅者因此也成为观察者，⽽被观察的对象成为发布者或者主题。当发⽣了⼀个</p>
<p>​    重要事件时候 发布者会通知（调⽤）所有订阅者并且可能经常已事件对象的形式传递消息。</p>
<pre><code>class Event&#123;
 constructor()&#123;
     this.callbacks = &#123;&#125;
 &#125;
 $off(name)&#123;
     this.callbacks[name] = null
 &#125;
 $emit(name, args)&#123;
     let cbs = this.callbacks[name]
     if (cbs) &#123;
         cbs.forEach(c=&gt;&#123;
             c.call(this, args)
         &#125;)
     &#125;
 &#125;
 $on(name, fn)&#123;
     (this.callbacks[name] || (this.callbacks[name] = [])).push(fn)
 &#125;
&#125;
let event = new Event()
event.$on(&#39;event1&#39;, function(arg)&#123;
 console.log(&#39;事件1&#39;,arg)
&#125;)
event.$on(&#39;event1&#39;, function(arg)&#123;
 console.log(&#39;⼜⼀个时间1&#39;,arg)
&#125;)
event.$on(&#39;event2&#39;, function(arg)&#123;
 console.log(&#39;事件2&#39;,arg)
&#125;)
event.$emit(&#39;event1&#39;,&#123;name:&#39;开课吧&#39;&#125;)
event.$emit(&#39;event2&#39;,&#123;name:&#39;全栈&#39;&#125;)
event.$off(&#39;event1&#39;)
event.$emit(&#39;event1&#39;,&#123;name:&#39;开课吧&#39;&#125;)
</code></pre>
<p>vue中的 emit,on源码 ⼤概也是这个样⼦</p>
<p><a href="https://github.com/vuejs/vue/blob/dev/src/core/instance/events.js#L54">https://github.com/vuejs/vue/blob/dev/src/core/instance/events.js#L54</a></p>
<h2 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h2><p>单例模式的定义：保证⼀个类仅有⼀个实例，并提供⼀个访问它的全局访问点。实现的⽅法为先判断实例存在与否，如果存在则直接返回，如果不存在就创建了再返回，这就确保了⼀个类只有⼀个实例对象。</p>
<p>适⽤场景：⼀个单⼀对象。⽐如：弹窗，⽆论点击多少次，弹窗只应该被创建⼀次’ 实现起来也很简单，⽤⼀个变量缓存即可.</p>
<pre><code>&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt;
 &lt;meta charset=&quot;UTF-8&quot;&gt;
 &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
 &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
 &lt;title&gt;Document&lt;/title&gt;
 &lt;style&gt;
 .model&#123;
 border:1px solid black;
 position: fixed;
 width:300px;
 height:300px;
 top:20%;
 left:50%;
 margin-left:-150px;
 text-align: center;
 
 &#125;
 &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
 &lt;div id=&quot;loginBtn&quot;&gt;点我&lt;/div&gt;
 &lt;script&gt;
 
 var getSingle = function( fn )&#123;
     var result;
     return function()&#123;
         return result || ( result = fn.apply(this, arguments )         
     );
  &#125;
&#125;;
var createLoginLayer = function()&#123;
     var div = document.createElement( &#39;div&#39; );
     div.innerHTML = &#39;我是登录浮窗&#39;;
     div.className = &#39;model&#39;
     div.style.display = &#39;none&#39;; 
     document.body.appendChild( div );
     return div;
&#125;;
var createSingleLoginLayer = getSingle( createLoginLayer );
document.getElementById( &#39;loginBtn&#39; ).onclick = function()&#123;
     var loginLayer = createSingleLoginLayer();
     loginLayer.style.display = &#39;block&#39;;
&#125;;
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>应⽤场景</p>
<p>我们再element中的弹窗代码中，可以看到单例模式的实际案例 保证全局唯⼀性 <a href="https://github.com/ElemeFE/element/blob/dev/packages/message-box/src/main.js#L79">https://github.com/ElemeFE/element/blob/dev/packages/message-box/src/main.js#L79</a></p>
<h2 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h2><p>策略模式的定义：定义⼀系列的算法，把他们⼀个个封装起来，并且使他们可以相互替换。</p>
<p>策略模式的⽬的就是将算法的使⽤算法的实现分离开来。</p>
<p>⼀个基于策略模式的程序⾄少由两部分组成。第⼀个部分是⼀组策略类（可变），策略类封装了具体的算法，并负责具体的计算过程。第⼆个部分是环境类Context（不变），Context接受客户的请求，随后将请求委托给某⼀个策略类。要做到这⼀点，说明Context中要维持对某个策略对象的引⽤举个栗⼦</p>
<p>奖⾦计算，绩效为 S 的⼈年 终奖有 4 倍⼯资，绩效为 A 的⼈年终奖有 3 倍⼯资，⽽绩效为 B 的⼈年终奖是 2 倍⼯资</p>
<pre><code>var calculateBonus = function( performanceLevel, salary )&#123;
 if ( performanceLevel === &#39;S&#39; )&#123;
 return salary * 4;
 &#125;
 if ( performanceLevel === &#39;A&#39; )&#123;
 return salary * 3;
 &#125;
 if ( performanceLevel === &#39;B&#39; )&#123;
 return salary * 2;
 &#125;
&#125;;
calculateBonus( &#39;B&#39;, 20000 ); // 输出:40000
calculateBonus( &#39;S&#39;, 6000 ); // 输出:24000
</code></pre>
<p>使⽤策略模式</p>
<pre><code>var strategies = &#123;
 &quot;S&quot;: function( salary )&#123;
 return salary * 4;
 &#125;,
 &quot;A&quot;: function( salary )&#123;
 return salary * 3;
 &#125;,
 &quot;B&quot;: function( salary )&#123;
 return salary * 2;
 &#125;
&#125;;
var calculateBonus = function( level, salary )&#123;
 return strategies[ level ]( salary );
&#125;;
console.log( calculateBonus( &#39;S&#39;, 20000 ) );// 输出:80000
console.log( calculateBonus( &#39;A&#39;, 10000 ) );// 输出:30000
</code></pre>
<p>表单校验</p>
<pre><code>// 正常写法
var registerForm = document.getElementById( &#39;registerForm&#39; );
registerForm.onsubmit = function()&#123;
 if ( registerForm.userName.value === &#39;&#39; )&#123;
 alert ( &#39;⽤户名不能为空&#39; );
 return false;
 &#125;
 if ( registerForm.password.value.length &lt; 6 )&#123;
 alert ( &#39;密码⻓度不能少于 6 位&#39; );
 return false;
 &#125;
 if ( !/(^1[3|5|8][0-9]&#123;9&#125;$)/.test( registerForm.phoneNumber.value ) )&#123;
 alert ( &#39;⼿机号码格式不正确&#39; );
 return false;
 &#125;
&#125;
</code></pre>
<p>使⽤策略模式</p>
<pre><code>var strategies = &#123;
 isNonEmpty: function( value, errorMsg )&#123;
 if ( value === &#39;&#39; )&#123;
 return errorMsg ;
 &#125;
 &#125;,
 minLength: function( value, length, errorMsg )&#123;
 if ( value.length &lt; length )&#123;
 return errorMsg;
 &#125;
 &#125;,
 isMobile: function( value, errorMsg )&#123; // ⼿机号码格式
 if ( !/(^1[3|5|8][0-9]&#123;9&#125;$)/.test( value ) )&#123;
 return errorMsg;
 &#125;
 &#125;
&#125;;
var Validator = function()&#123;
 this.cache = []; // 保存校验规则
&#125;;
Validator.prototype.add = function(
 var ary = rule.split( &#39;:&#39; );
 this.cache.push(function()&#123; //
 var strategy = ary.shift();
 ary.unshift( dom.value );
 ary.push( errorMsg ); //
  return strategies[strategy].apply(dom, ary);
 &#125;);
&#125;;
Validator.prototype.start = function()&#123;
 for ( var i = 0, validatorFunc; validatorFunc = this.cache[ i++ ]; )&#123;
 var msg = validatorFunc(); // 开始校验，并取得校验后的返回信息
 if ( msg )&#123; // 如果有确切的返回值，说明校验没有通过
 return msg;
 &#125;
 &#125;
&#125;;
var validataFunc = function()&#123;
 var validator = new Validator(); // 创建⼀个 validator 对象
 /***************添加⼀些校验规则****************/
 validator.add( registerForm.userName, &#39;isNonEmpty&#39;, &#39;⽤户名不能为空&#39; ); 
 
 validator.add( registerForm.password, &#39;minLength:6&#39;, &#39;密码⻓度不能少于 6位&#39;);
 
 validator.add( registerForm.phoneNumber, &#39;isMobile&#39;, &#39;⼿机号码格式不正确&#39; );
 var errorMsg = validator.start(); // 获得校验结果
 return errorMsg; // 返回校验结果
&#125;
var registerForm = document.getElementById( &#39;registerForm&#39; );
registerForm.onsubmit = function()&#123;
 var errorMsg = validataFunc(); // 如果 errorMsg 有确切的返回值，说明未通过校验
 if ( errorMsg )&#123;
 alert ( errorMsg );
 return false; // 阻⽌表单提交
 &#125;s
&#125;;
</code></pre>
<h2 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h2><p>代理模式的定义：为⼀个对象提供⼀个代⽤品或占位符，以便控制对它的访问。</p>
<p>常⽤的虚拟代理形式：某⼀个花销很⼤的操作，可以通过虚拟代理的⽅式延迟到这种需要它的时候才去创建（例：使⽤虚拟代理实现图⽚懒加载）</p>
<p>图⽚懒加载的⽅式：先通过⼀张loading图占位，然后通过异步的⽅式加载图⽚，等图⽚加载好了再把完成的图⽚加载到img标签⾥⾯。</p>
<pre><code>var imgFunc = (function() &#123;
 var imgNode = document.createElement(&#39;img&#39;);
 document.body.appendChild(imgNode);
 return &#123;
 setSrc: function(src) &#123;
  imgNode.src = src;
 &#125;
 &#125;
&#125;)();
var proxyImage = (function() &#123;
 var img = new Image();
 img.onload = function() &#123;
 imgFunc.setSrc(this.src);
 &#125;
 return &#123;
 setSrc: function(src) &#123;
 imgFunc.setSrc(&#39;./loading,gif&#39;);
 img.src = src;
 &#125;
 &#125;
&#125;)();
proxyImage.setSrc(&#39;./pic.png&#39;);
</code></pre>
<p>假设我们在做⼀个⽂件同步的功能，当我们选中⼀个 checkbox 的时候，它对应的⽂件就会被同 步到另外⼀台备⽤服务器上⾯。当⼀次选中过多时，会产⽣频繁的⽹络请求。将带来很⼤的开销。可以通过⼀个代理函数 proxySynchronousFile 来收集⼀段时间之内的请求， 最后⼀次性发送给服务器</p>
<pre><code>var synchronousFile = function( id )&#123;
 console.log( &#39;开始同步⽂件，id 为: &#39; + id );
&#125;;
var proxySynchronousFile = (function()&#123;
 var cache = [], // 保存⼀段时间内需要同步的 ID
 timer; // 定时器
 return function( id )&#123;
 cache.push( id );
 if ( timer )&#123; // 保证不会覆盖已经启动的定时器
 return;
 &#125;
 timer = setTimeout(function()&#123;
 synchronousFile( cache.join( &#39;,&#39; ) );
 clearTimeout( timer ); // 清空定时器
 timer = null;
 cache.length = 0; // 清空 ID 集合
 &#125;, 2000 );
 &#125;// 2 秒后向本体发送需要同步的 ID 集合
&#125;)();
var checkbox = document.getElementsByTagName( &#39;input&#39; );
 for ( var i = 0, c; c = checkbox[ i++ ]; )&#123;
 c.onclick = function()&#123;
 if ( this.checked === true )&#123;
 proxySynchronousFile( this.id ); &#125;
  &#125;
&#125;;
</code></pre>
<h2 id="中介者模式"><a href="#中介者模式" class="headerlink" title="中介者模式"></a>中介者模式</h2><p>中介者模式的定义：通过⼀个中介者对象，其他所有的相关对象都通过该中介者对象来通信，⽽不是相互引⽤，当其中的⼀个对象发⽣改变时，只需要通知中介者对象即可。通过中介者模式可以解除对象与对象之间的紧耦合关系。</p>
<p>例如：现实⽣活中，航线上的⻜机只需要和机场的塔台通信就能确定航线和⻜⾏状态，⽽不需要和所有⻜机通信。同时塔台作为中介者，知道每架⻜机的⻜⾏状态，所以可以安排所有⻜机的起降和航线安排。</p>
<p>中介者模式适⽤的场景：例如购物⻋需求，存在商品选择表单、颜⾊选择表单、购买数量表单等等，都会触发change事件，那么可以通过中介者来转发处理这些事件，实现各个事件间的解耦，仅仅维护中介者对象即可。</p>
<p>redux，vuex 都属于中介者模式的实际应⽤，我们把共享的数据，抽离成⼀个单独的store， 每个都通过store这个中介来操作对象</p>
<p>⽬的就是减少耦合</p>
<h2 id="装饰器模式"><a href="#装饰器模式" class="headerlink" title="装饰器模式"></a>装饰器模式</h2><p>装饰者模式的定义：在不改变对象⾃身的基础上，在程序运⾏期间给对象动态地添加⽅法。常⻅应⽤，react的⾼阶组件, 或者react-redux中的@connect 或者⾃⼰定义⼀些⾼阶组件</p>
<pre><code>import React from &#39;react&#39;
const withLog = Component=&gt;&#123;
 // 类组件
 class NewComponent extends React.Component&#123;
 componentWillMount()&#123;
 console.time(`CompoentRender`)
 console.log(`准备完毕了`)
 &#125;
 render()&#123;
 return &lt;Component &#123;...this.props&#125;&gt;&lt;/Component&gt;
 &#125;
开课吧web全栈架构师
 
 componentDidMount()&#123;
 console.timeEnd(`CompoentRender`)
 console.log(`渲染完毕了`)
 &#125;
 &#125;
 return NewComponent
&#125;
export &#123;withLog&#125;
@withLog
class XX
export const connect = (mapStateToProps = state =&gt; state, mapDispatchToProps =
&#123;&#125;) =&gt; (WrapComponent) =&gt; &#123;
 return class ConnectComponent extends React.Component &#123;
 static contextTypes = &#123;
 store: PropTypes.object
 &#125;
 constructor(props, context) &#123;
 super(props, context)
 this.state = &#123;
 props: &#123;&#125;
 &#125;
 &#125;
 componentDidMount() &#123;
 const &#123; store &#125; = this.context
 // 当前状态 update 后, 放⼊监听器中, ⽤于下⼀次的更新(每次 dispatch 后会执⾏
subscribe 中的所有函数)
 store.subscribe(() =&gt; this.update())
 this.update()
 &#125;
 update() &#123;
 const &#123; store &#125; = this.context
 const stateProps = mapStateToProps(store.getState())
 const dispatchProps = bindActionCreators(mapDispatchToProps,
store.dispatch)
 this.setState(&#123;
 props: &#123;
 ...this.state.props,
 ...stateProps,
 ...dispatchProps
 &#125;
 &#125;)
 &#125;
 render() &#123;
 return &lt;WrapComponent &#123;...this.state.props&#125;&gt;&lt;/WrapComponent&gt;
 &#125;
  &#125; 
  &#125;
</code></pre>
<p>假设我们在编写⼀个⻜机⼤战的游戏，随着经验值的增加，我们操作的⻜机对象可以升级成更厉害的⻜机，⼀开始这些⻜机只能发射普通的⼦弹，升到第⼆级时可以发射导弹，升到第三级时可以发射原⼦弹。</p>
<pre><code>Function.prototype.before = function( beforefn )&#123;
 var __self = this; // 保存原函数的引⽤
 return function()&#123; // 返回包含了原函数和新函数的&quot;代理&quot;函数
 beforefn.apply( this, arguments ); // 执⾏新函数，且保证 this 不被劫持，新函
数接受的参数 // 也会被原封不动地传⼊原函数，新函数在原函数之前执⾏
 return __self.apply( this, arguments ); // 执⾏原函数并返回原函数的执⾏结
果， // 并且保证 this 不被劫持
&#125; &#125;
Function.prototype.after = function( afterfn )&#123;
 var __self = this;
 return function()&#123;
 var ret = __self.apply( this, arguments );
 afterfn.apply( this, arguments );
 return ret;
 &#125;
&#125;;
</code></pre>
<p>⽐如⻚⾯中有⼀个登录 button，点击这个 button 会弹出登录浮层，与此同时要进⾏数据上报， 来统计有多少⽤户点击了这个登录 button</p>
<pre><code>var showLogin = function()&#123;
 console.log( &#39;打开登录浮层&#39; );
 log( this.getAttribute( &#39;tag&#39; ) );
&#125;
var log = function( tag )&#123;
 console.log( &#39;上报标签为: &#39; + tag );
 (new Image).src = &#39;http:// xxx.com/report?tag=&#39; + tag; &#125;
document.getElementById( &#39;button&#39; ).onclick = showLogin;
</code></pre>
<p>使⽤装饰器</p>
<pre><code>var showLogin = function()&#123;
 console.log( &#39;打开登录浮层&#39; );
&#125;
var log = function()&#123;
 console.log( &#39;上报标签为: &#39; + this.getAttribute( &#39;tag&#39; ) );
&#125;
showLogin = showLogin.after( log ); // 打开登录浮层之后上报数据
document.getElementById( &#39;button&#39; ).onclick = showLogin;
</code></pre>
<p>装饰者模式和代理模式的结构看起来⾮常相像，这两种模式都描述了怎样为对象提供 ⼀定程度上的间接引⽤，它们的实现部分都保留了对另外⼀个对象的引⽤，并且向那个对象发送 请求。 代理模式和装饰者模式最重要的区别在于它们的意图和设计⽬的。代理模式的⽬的是，当直接访问本体不⽅便或者不符合需要时，为这个本体提供⼀个替代者。本体定义了关键功能，⽽代理提供或拒绝对它的访问，或者在访问本体之前做⼀些额外的事情。装饰者模式的作⽤就是为对 象动态加⼊⾏为。</p>
<p>其实Vue中的v-input，v-checkbox也可以认为是装饰器模式， 对原⽣的input和checkbox做⼀层装饰</p>
<h2 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a>外观模式</h2><p>外观模式即让多个⽅法⼀起被调⽤涉及到兼容性，参数⽀持多格式，有很多这种代码，对外暴露统⼀的api，⽐如上⾯的$on ⽀持数组，￥offff参数⽀持多个情况， 对⾯只⽤⼀个函数，内部判断实现</p>
<p>⾃⼰封装组件库 经常看到</p>
<pre><code>myEvent = &#123;
 stop: function(e) &#123;
 if (typeof e.preventDefault() === &quot;function&quot;) &#123;
 e.preventDefault();
 &#125;
 if (typeof e.stopPropagation() === &quot;function&quot;) &#123;
 e.stopPropagation();
 &#125;
 //for IE
 if (typeof e.returnValue === &quot;boolean&quot;) &#123;
 e.returnValue = false;
 &#125;
 if (typeof e.cancelBubble === &quot;boolean&quot;) &#123;
 e.cancelBubble = true;
 &#125;
 &#125;
 addEvent(dom, type, fn) &#123;
  if (dom.addEventListener) &#123;
 dom.addEventListener(type, fn, false);
 &#125; else if (dom.attachEvent) &#123;
 dom.attachEvent(&#39;on&#39; + type, fn);
 &#125; else &#123;
 dom[&#39;on&#39; + type] = fn;
 &#125;
 &#125;
&#125;
</code></pre>
<h2 id="⼯⼚模式"><a href="#⼯⼚模式" class="headerlink" title="⼯⼚模式"></a>⼯⼚模式</h2><p>提供创建对象的接⼝，把成员对象的创建⼯作转交给⼀个外部对象，好处在于消除对象之间的耦合(也就</p>
<p>是相互影响)</p>
<p>常⻅的例⼦，我们的弹窗，message，对外提供的api，都是调⽤api，然后新建⼀个弹窗或者Message</p>
<p>的实例，就是典型的⼯⼚模式</p>
<pre><code>const Notification = function(options) &#123;
 if (Vue.prototype.$isServer) return;
 options = options || &#123;&#125;;
 const userOnClose = options.onClose;
 const id = &#39;notification_&#39; + seed++;
 const position = options.position || &#39;top-right&#39;;
 options.onClose = function() &#123;
 Notification.close(id, userOnClose);
 &#125;;
 instance = new NotificationConstructor(&#123;
 data: options
 &#125;);
 if (isVNode(options.message)) &#123;
 instance.$slots.default = [options.message];
 options.message = &#39;REPLACED_BY_VNODE&#39;;
 &#125;
 instance.id = id;
 instance.$mount();
 document.body.appendChild(instance.$el);
 instance.visible = true;
 instance.dom = instance.$el;
 instance.dom.style.zIndex = PopupManager.nextZIndex();
  let verticalOffset = options.offset || 0;
 instances.filter(item =&gt; item.position === position).forEach(item =&gt; &#123;
 verticalOffset += item.$el.offsetHeight + 16;
 &#125;);
 verticalOffset += 16;
 instance.verticalOffset = verticalOffset;
 instances.push(instance);
 return instance;
&#125;;
</code></pre>
<p><a href="https://github.com/ElemeFE/element/blob/dev/packages/notifification/src/main.js#L11">https://github.com/ElemeFE/element/blob/dev/packages/notifification/src/main.js#L11</a></p>
<h2 id="建造者模式"><a href="#建造者模式" class="headerlink" title="建造者模式"></a>建造者模式</h2><p>和⼯⻓模式相⽐，参与了更多创建的过程 或者更复杂</p>
<pre><code>var Person = function(name, work) &#123;
 // 创建应聘者缓存对象
 var _person = new Human();
 // 创建应聘者姓名解析对象
 _person.name = new Named(name);
 // 创建应聘者期望职位
 _person.work = new Work(work);
 return _person;
&#125;;
var person = new Person(&#39;xiao ming&#39;, &#39;code&#39;);
console.log(person)
</code></pre>
<h2 id="迭代器模式"><a href="#迭代器模式" class="headerlink" title="迭代器模式"></a>迭代器模式</h2><p>迭代器模式是指提供⼀种⽅法顺序访问⼀个聚合对象中的各个元素，⽽⼜不需要暴露该对象的内部表示。迭代器模式可以把迭代的过程从业务逻辑中分离出来,在使⽤迭代器模式之后，即使不关⼼对象的内部构造，也可以按顺序访问其中的每个元素</p>
<p>这个⽤的就太多了 each map啥乱遭的</p>
<pre><code>var each = function( ary, callback )&#123;
 for ( var i = 0, l = ary.length; i &lt; l; i++ )&#123;
 callback.call( ary[i], i, ary[ i ] );
 &#125;
&#125;;
each( [ 1, 2, 3 ], function( i, n )&#123;
 alert ( [ i, n ] );
&#125;)
</code></pre>
<h2 id="享元模式"><a href="#享元模式" class="headerlink" title="享元模式"></a>享元模式</h2><p>享元(flflyweight)模式是⼀种⽤于性能优化的模式，“flfly”在这⾥是苍蝇的意思，意为蝇量级。享元模式的核⼼是象⽽导致内存占⽤过⾼，享元模式就⾮常有⽤了。在 JavaScript 中，浏览器特别是移动端的浏览器分配的内存并不算多，如何节省内存就成了⼀件⾮常有意义的事情。</p>
<p>假设有个内⾐⼯⼚，⽬前的产品有 50 种男式内⾐和 50 种⼥⼠内⾐，为了推销产品，⼯⼚决定⽣产⼀些塑料模特来穿上他们的内⾐拍成⼴告照⽚。 正常情况下需要 50个男模特和50个⼥模特，然后让他们每⼈分别穿上⼀件内⾐来拍照</p>
<pre><code>var Model = function( sex, underwear)&#123;
 this.sex = sex;
 this.underwear = underwear;
&#125;;
Model.prototype.takePhoto = function()&#123;
 console.log( &#39;sex= &#39; + this.sex + &#39; underwear=&#39; + this.underwear);
&#125;;
for ( var i = 1; i &lt;= 50; i++ )&#123;
 var maleModel = new Model( &#39;male&#39;, &#39;underwear&#39; + i ); 
 maleModel.takePhoto();
 &#125;;
for ( var j = 1; j &lt;= 50; j++ )&#123;
 var femaleModel= new Model( &#39;female&#39;, &#39;underwear&#39; + j );
 femaleModel.takePhoto();
&#125;;
</code></pre>
<p>如上所述，现在⼀共有 50 种男内 ⾐和 50 种⼥内⾐，所以⼀共会产⽣ 100 个对象。如果将来⽣产了10000 种内⾐，那这个程序可能会因为存在如此多的对象已经提前崩溃。 下⾯我们来考虑⼀下如何优化这个场景。虽然有 100 种内⾐，但很显然并不需要 50 个男 模特和 50 个⼥模特。其实男模特和⼥模特各⾃有⼀个就⾜够了，他们可以分别穿上不同的内⾐来拍照。</p>
<pre><code>/*只需要区别男⼥模特
那我们先把 underwear 参数从构造函数中 移除，构造函数只接收 sex 参数*/
var Model = function( sex )&#123;
 this.sex = sex;
&#125;;
Model.prototype.takePhoto = function()&#123;
 console.log( &#39;sex= &#39; + this.sex + &#39; underwear=&#39; + this.underwear);
&#125;;
/*分别创建⼀个男模特对象和⼀个⼥模特对象*/
var maleModel = new Model( &#39;male&#39; ),
 femaleModel = new Model( &#39;female&#39; );
/*给男模特依次穿上所有的男装，并进⾏拍照*/
for ( var i = 1; i &lt;= 50; i++ )&#123;
 maleModel.underwear = &#39;underwear&#39; + i;
 maleModel.takePhoto();
&#125;;
/*给⼥模特依次穿上所有的⼥装，并进⾏拍照*/
for ( var j = 1; j &lt;= 50; j++ )&#123;
 femaleModel.underwear = &#39;underwear&#39; + j;
 femaleModel.takePhoto();
&#125;;
//只需要两个对象便完成了同样的功能
</code></pre>
<p>内部状态存储于对象内部</p>
<p>内部状态可以被⼀些对象共享</p>
<p>内部状态独⽴于具体的场景，通常不会改变</p>
<p>外部状态取决于具体的场景，并根据场景⽽变化，外部状态不能被共享</p>
<p>性别是内部状态，内⾐是外部状态，通过区分这两种状态，⼤⼤减少了系 统中的对象数量。通常来讲，</p>
<p>内部状态有多少种组合，系统中便最多存在多少个对象，因为性别 通常只有男⼥两种，所以该内⾐⼚商最多只需要 2 个对象。</p>
<h2 id="应⽤案例"><a href="#应⽤案例" class="headerlink" title="应⽤案例"></a>应⽤案例</h2><p>消息组件</p>
<p>应⽤案例</p>
<p><img src="C:\Users\Jiang\AppData\Roaming\Typora\typora-user-images\image-20210302163543092.png" alt="image-20210302163543092"></p>
<p>需求</p>
<ol>
<li><p>弹窗逻辑⼀样</p>
</li>
<li><p>四中弹窗，颜⾊，icon不同</p>
</li>
<li><p>接收⽂案</p>
</li>
</ol>
<p>交互⽅式——弹出、隐藏，由共享对象所拥有</p>
<p>提示icon、背景样式、字体样式提供接⼝可配置</p>
<p>使⽤api统一</p>
<pre><code>export default &#123;
 install (Vue) &#123;
 // 在使⽤插件Vue.use(Message)时实例化⼀个Dialog组件对象
 const Dialog = new Vue(&#123;
 data () &#123;
 return &#123;
 icon: &#39;&#39;,
 fontStyle: &#39;&#39;,
 backgroundStyle: &#39;&#39;,
 text: &#39;&#39;
 &#125;
 &#125;
 ...
 &#125;)
 
 // 扩展Vue的`prototype`
 Vue.prototype.$Message = &#123;
 success (text) &#123;
 // 改变Dialog的data.xx的值触发Dialog的更新
 Dialog.icon = successIcon
 Dialog.fontStyle = successFontStyle
 Dialog.backgroundStyle = successBackgroundStyle
 Dialog.text = text
 // 获取Dialog的最新DOM添加到body标签中
 document.body.appendChild(Dialog.$el)
 &#125;,
 warning (text) &#123;
 // 同上
 ...
 document.body.appendChild(Dialog.$el)
 &#125;,
 error (text) &#123;
 // 同上
 ...
 document.body.appendChild(Dialog.$el)
 &#125;
 &#125;
 &#125;
&#125;
</code></pre>
<p>Dialog只会在项⽬初始化时被 new ⼀次，每次使⽤Message组件通过改变Dialog的状态获取组件DOM，其实很容易知道new⼀个组件的成本要⽐⼀个组件的更新成本⾼很多</p>
<h2 id="职责链模式"><a href="#职责链模式" class="headerlink" title="职责链模式"></a>职责链模式</h2><p>职责链模式的定义是:使多个对象都有机会处理请求，从⽽避免请求的发送者和接收者之间的耦合关系，将这些对象连成⼀条链，并沿着这条链传递该请求，直到有⼀个对象处理它为⽌。 职责链模式的名字⾮常形象，⼀系列可能会处理请求的对象被连接成⼀条链，请求在这些对 象之间依次传递，直到遇到⼀个可以处理它的对象，我们把这些对象称为链中的节点</p>
<p>假设我们负责⼀个售卖⼿机的电商⽹站，经过分别交纳 500 元定⾦和 200 元定⾦的两轮预定后(订单已在此时⽣成)，现在已经到了正式购买的阶段。 公司针对⽀付过定⾦的⽤户有⼀定的优惠政策。在正式购买后，已经⽀付过 500 元定⾦的⽤ 户会收到 100 元的商城优惠券，200 元定⾦的⽤户可以收到 50 元的优惠券，⽽之前没有⽀付定⾦的⽤户只能进⼊普通购买模式，也就是没有优惠券，且在库存有限的情况下不⼀定保证能买到</p>
<pre><code>var order = function( orderType, pay, stock )&#123;
 if ( orderType === 1 )&#123; // 500 元定⾦购买模式
 if ( pay === true )&#123; // 已⽀付定⾦
 console.log( &#39;500 元定⾦预购, 得到 100 优惠券&#39; );
 &#125; else&#123; // 未⽀付定⾦，降级到普通购买模式
 if ( stock &gt; 0 )&#123; // ⽤于普通购买的⼿机还有库存
 console.log( &#39;普通购买, ⽆优惠券&#39; );
 &#125;else&#123;
 console.log( &#39;⼿机库存不⾜&#39; );
 &#125;
 &#125;
 &#125; else if ( orderType === 2 )&#123;
 if ( pay === true )&#123; // 200 元定⾦购买模式
 console.log( &#39;200 元定⾦预购, 得到 50 优惠券&#39; );
 &#125;else&#123;
 if ( stock &gt; 0 )&#123;
 console.log( &#39;普通购买, ⽆优惠券&#39; );
 &#125;else&#123;
 console.log( &#39;⼿机库存不⾜&#39; );
 &#125;
 &#125;
 &#125; else if (orderType === 3) &#123;
 if ( stock &gt; 0 )&#123;
 console.log( &#39;普通购买, ⽆优惠券&#39; );
 &#125; else&#123;
 console.log( &#39;⼿机库存不⾜&#39; );
 &#125;
 &#125;
&#125;;
order( 1 , true, 500); // 输出: 500 元定⾦预购, 得到 100 优惠券
</code></pre>
<p>现在我们采⽤职责链模式重构这段代码，先把 500 元订单、200 元订单以及普通购买分成 3 个函数。接下来把 orderType、pay、stock 这 3 个字段当作参数传递给 500 元订单函数，如果该函数不符合处理条件，则把这个请求传递给后⾯的 200 元订单函数，如果 200 元订单函数依然不能处理该请求，则继续传递请求给普通购买函数。</p>
<pre><code>var order500 = function( orderType, pay, stock )&#123;
 if ( orderType === 1 &amp;&amp; pay === true )&#123;
 console.log( &#39;500 元定⾦预购，得到 100 优惠券&#39; );
 &#125; else&#123;
 return &#39;nextSuccessor&#39;; // 我不知道下⼀个节点是谁，反正把请求往后⾯传递
 &#125;
&#125;;
var order200 = function( orderType, pay, stock )&#123;
 if ( orderType === 2 &amp;&amp; pay === true )&#123;
 console.log( &#39;200 元定⾦预购，得到 50 优惠券&#39; );
 &#125; else&#123;
 return &#39;nextSuccessor&#39;; // 我不知道下⼀个节点是谁，反正把请求往后⾯传递
 &#125;
&#125;;
var orderNormal = function( orderType, pay, stock )&#123;
 if ( stock &gt; 0 )&#123;
 console.log( &#39;普通购买，⽆优惠券&#39; );
 &#125; else&#123;
 console.log( &#39;⼿机库存不⾜&#39; );
 &#125;
&#125;;
// Chain.prototype.setNextSuccessor 指定在链中的下⼀个节点
// Chain.prototype.passRequest 传递请求给某个节点
var Chain = function( fn )&#123;
 this.fn = fn;
 this.successor = null;
&#125;;
Chain.prototype.setNextSuccessor = function( successor )&#123;
 return this.successor = successor;
&#125;;
Chain.prototype.passRequest = function()&#123;
 var ret = this.fn.apply( this, arguments );
 if ( ret === &#39;nextSuccessor&#39; )&#123;
 return this.successor &amp;&amp; this.successor.passRequest.apply(
this.successor, arguments );
 &#125;
 return ret;
&#125;;
var chainOrder500 = new Chain( order500 );
var chainOrder200 = new Chain( order200 );
var chainOrderNormal = new Chain( orderNormal );
chainOrder500.setNextSuccessor( chainOrder200 );
chainOrder200.setNextSuccessor( chainOrderNormal);
chainOrder500.passRequest( 1, true, 500 ); // 输出:500 元定⾦预购，得到 100 优惠
券
chainOrder500.passRequest( 2, true, 500 ); // 输出:200 元定⾦预购，得到 50 优惠券
chainOrder500.passRequest( 3, true, 500 ); // 输出:普通购买，⽆优惠券
chainOrder500.passRequest( 1, false, 0 ); // 输出:⼿机库存不⾜
</code></pre>
<p>通过改进，我们可以⾃由灵活地增加、移除和修改链中的节点顺序，假如某天⽹站运营⼈员 ⼜想出了⽀持 300 元定⾦购买，那我们就在该链中增加⼀个节点即可</p>
<pre><code>var order300 = function()&#123;
// 具体实现略
&#125;;
chainOrder300= new Chain( order300 );
chainOrder500.setNextSuccessor( chainOrder300);
chainOrder300.setNextSuccessor( chainOrder200);
</code></pre>
<h2 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h2><p>适配器模式的作⽤是解决两个软件实体间的接⼝不兼容的问题。使⽤适配器模式之后，原本 由于接⼝不兼容⽽不能⼯作的两个软件实体可以⼀起⼯作。 适配器的别名是包装器(wrapper)，这是⼀个相对简单的模式。在程序开发中有许多这样的 场景:当我们试图调⽤模块或者对象的某个接⼝时，却发现这个接⼝的格式并不符合⽬前的需求。 这时候有两种解决办法，第⼀种是修改原来的接⼝实现，但如果原来的模块很复杂，或者我们拿 到的模块是⼀段别⼈编写的经过压缩的代码，修改原接⼝就显得不太现实了。第⼆种办法是创建 ⼀个适配器，将原接⼝转换为客户希望的另⼀个接⼝，客户只需要和适配器打交道。</p>
<pre><code>var googleMap = &#123;
 show: function()&#123;
 console.log( &#39;开始渲染⾕歌地图&#39; );
 &#125;
&#125;;
var baiduMap = &#123;
 display: function()&#123;
 console.log( &#39;开始渲染百度地图&#39; );
 &#125;
&#125;;
var baiduMapAdapter = &#123;
 show: function()&#123;
 return baiduMap.display();
 &#125;
&#125;;
renderMap( googleMap ); // 输出:开始渲染⾕歌地图
renderMap( baiduMapAdapter ); // 输出:开始渲染百度地图
</code></pre>
<p>适配器模式主要⽤来解决两个已有接⼝之间不匹配的问题，它不考虑这些接⼝是怎样实 现的，也不考虑它们将来可能会如何演化。适配器模式不需要改变已有的接⼝，就能够 使它们协同作⽤。</p>
<p>装饰者模式和代理模式也不会改变原有对象的接⼝，但装饰者模式的作⽤是为了给对象 增加功能。装饰者模式常常形成⼀条⻓的装饰链，⽽适配器模式通常只包装⼀次。代理 模式是为了控制对对象的访问，通常也只包装⼀次。</p>
<p>我们设计很多插件，有默认值，也算是适配器的⼀种应⽤， vue的prop校验，default也算是适配器的应⽤了</p>
<p>外观模式的作⽤倒是和适配器⽐较相似，有⼈把外观模式看成⼀组对象的适配器，但外观模式最显著的特点是定义了⼀个新的接⼝。</p>
<h2 id="模板⽅法模式"><a href="#模板⽅法模式" class="headerlink" title="模板⽅法模式"></a>模板⽅法模式</h2><p>模板⽅法模式在⼀个⽅法中定义⼀个算法的⻣架，⽽将⼀些步骤的实现延迟到⼦类中。模板⽅法使得⼦类可以在不改变算法结构的情况下，重新定义算法中某些步骤的具体实现</p>
<p>这个我们⽤的很多，vue中的slot，react中的children</p>
<pre><code>class Parent &#123;
 constructor() &#123;&#125;
 render () &#123;
 &lt;div&gt;
 &lt;div name=&quot;tom&quot;&gt;&lt;/div&gt;
 &lt;!-- 算法过程：children要渲染在name为joe的div中 --&gt;
 &lt;div name=&quot;joe&quot;&gt;&#123;this.props.children&#125;&lt;/div&gt;
 &lt;/div&gt;
 &#125;
&#125;
class Stage &#123;
 constructor() &#123;&#125;
 render () &#123;
 // 在parent中已经设定了children的渲染位置算法
 &lt;Parent&gt;
 // children的具体实现
 &lt;div&gt;child&lt;/div&gt;
 &lt;/Parent&gt;
 &#125; 
&#125;
</code></pre>
<pre><code>&lt;template&gt;
&lt;div&gt;
 &lt;div name=&quot;tom&quot;&gt;&lt;/div&gt;
 &lt;div name=&quot;joe&quot;&gt;
 &lt;!--vue中的插槽渲染children--&gt;
 &lt;slot /&gt;
 &lt;/div&gt;
 &lt;/div&gt;
&lt;/template&gt;
&lt;template&gt;
 &lt;div&gt;
 &lt;parent&gt;
 &lt;!-- children的具体实现 --&gt;
 &lt;div&gt;child&lt;/div&gt;
 &lt;/parent&gt;
 &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h2 id="备忘录模式"><a href="#备忘录模式" class="headerlink" title="备忘录模式"></a>备忘录模式</h2><p>可以恢复到对象之前的某个状态，其实⼤家学习react或者redux的时候，时间旅⾏的功能，就算是备忘录模式的⼀个应⽤</p>
<p><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/tutorial/tutorial.html#implementing-time-travel">https://zh-hans.reactjs.org/tutorial/tutorial.html#implementing-time-travel</a></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>创建设计模式： ⼯⼚，单例，建造者 原型</p>
<p>结构化设计模式：外观，适配器，代理，装饰器，享元 桥接，组合</p>
<p>⾏为型：策略，模板⽅法，观察者，迭代器，责任链，命令，备忘录，状态，访问者，终结者，解释器</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">蒋岳生</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://github.com/jiayueshe/jiayueshe.github.io/2021/03/02/kaikeba/javascript-she-ji-mo-shi/">https://github.com/jiayueshe/jiayueshe.github.io/2021/03/02/kaikeba/javascript-she-ji-mo-shi/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">蒋岳生</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">
                                    <span class="chip bg-color">设计模式</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2021/03/02/zhaoxistu/sqlsuoyin/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/1.jpg" class="responsive-img" alt="数据库性能优化">
                        
                        <span class="card-title">数据库性能优化</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            数据库性能优化
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-03-02
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="post-category">
                                    数据库性能优化
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                        <span class="chip bg-color">数据库</span>
                    </a>
                    
                    <a href="/tags/%E7%B4%A2%E5%BC%95/">
                        <span class="chip bg-color">索引</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/03/01/ziliao/javascript/es6/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/22.jpg" class="responsive-img" alt="ES6、ES7、ES8、ES9、ES10、ES11、ES12新特性">
                        
                        <span class="card-title">ES6、ES7、ES8、ES9、ES10、ES11、ES12新特性</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            ES6、ES7、ES8、ES9、ES10、ES11、ES12新特性
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-03-01
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/JavaScript/" class="post-category">
                                    JavaScript
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/ES6/">
                        <span class="chip bg-color">ES6</span>
                    </a>
                    
                    <a href="/tags/ES7/">
                        <span class="chip bg-color">ES7</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2021</span>
            
            <span id="year">2019</span>
            <a href="/about" target="_blank">JiangYuesheng</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">60.7k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/jiayueshe/jiayueshe.github.io" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>
    

        
            <a href="mailto:732767079@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
                <i class="fas fa-envelope-open"></i>
            </a>
            

                <!-- 

 -->

                
                    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=732767079" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 732767079" data-position="top" data-delay="50">
                        <i class="fab fa-qq"></i>
                    </a>
                    
                        <!-- 


 -->

                        
                            <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
                                <i class="fas fa-rss"></i>
                            </a>
                            </div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="/libs/background/canvas-nest.js"></script>
    

    
    
    <script type="text/javascript" size="150" alpha='0.6'
        zIndex="-1" src="/libs/background/ribbon.min.js" async="async"></script>
    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true,"react":{"opacity":0.7}}});</script></body>

</html>
